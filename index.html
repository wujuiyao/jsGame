<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>JS Game</title>
  <style>
  *{
    margin: 0px;
  }
  </style>
</head>
<body>
  <canvas id="game-Canvas" width="800" height="600" align="center"></canvas>
  <script>

   /*Variables*/
    var canvas, canvasContext;
    var ballSpeedX = 5;
    var ballSpeedY = 10;
    var ballX = 50;
    var ballY = 50;

    const PADDLE_THICKNESS = 15;
    const PADDLE_WIDTH = 120;
    const PADDLE_DIST_FROM_EDGE = 60;
    var paddleX;

   /*Functions*/
    window.onload = function(){

      var framesPerSecond = 30;
      setInterval(updateAll, 1000/framesPerSecond);
      canvas = document.getElementById('game-Canvas');
      canvasContext = canvas.getContext('2d');

      var canvasH = canvas.height;
      var canvasW = canvas.width;

      canvas.addEventListener("mousemove", updateMousePos);

    }

    function updateMousePos(evt){
      var rect = canvas.getBoundingClientRect();
      var root = document.documentElement;
      var mouseX = evt.clientX - rect.left - root.scrollLeft;
      // var mouseY = evt.clentY - rect.top - root.scrollTop;
      paddleX = mouseX - PADDLE_WIDTH/2;
      paddleX;
    }

    function updateAll(){
      move();
      draw();
    }

    function move(){
      ballX += ballSpeedX;
      ballY += ballSpeedY;

      /*left*/
      if(ballX < 0){
        ballSpeedX *= -1;
      }
      /*right*/
      if(ballX > canvas.width){
        ballSpeedX *= -1;
      }
      /*top*/
      if(ballY < 0){
        ballSpeedY *= -1;
      }
      /*bottom*/
      if(ballY > canvas.height){
        resetBall();
      }

      var paddleTopEdgeY = canvas.height - PADDLE_DIST_FROM_EDGE;
      var paddleBottomEdgeY = paddleTopEdgeY + PADDLE_THICKNESS;
      var paddleLeftEdgeX = paddleX;
      var paddleRightEdgeX = paddleLeftEdgeX + PADDLE_WIDTH;
      if(ballY > paddleTopEdgeY &&
         ballY < paddleBottomEdgeY &&
         ballX > paddleLeftEdgeX &&
         ballX < paddleRightEdgeX){
         var bounceBack;
         reflectBall(bounceBack);

         var centerOfPaddleX = paddleX + PADDLE_WIDTH/2;
         var ballDistFromPaddleCenterX = ballX - centerOfPaddleX;
         ballSpeedX = ballDistFromPaddleCenterX * 0.35;
      }
    }

    function resetBall(){
      var delay=500;
      setTimeout(function() {
        ballX = 100;
        ballY = 100;
      }, delay);
    }

    function reflectBall(reflect){
      ballSpeedY *= -1;
      var reflectBall = ballSpeedY;
      return reflectBall;
    }

    function draw(){
      /*main Canvas*/
      fillRect("black", 0,0,800,600);
      /*ball*/
      ball("white", ballX, ballY, 10);
      /*paddle*/
      fillRect("white", paddleX, canvas.height - PADDLE_DIST_FROM_EDGE, PADDLE_WIDTH, PADDLE_THICKNESS);
    }

    function fillRect(colorCanvas, topLeftX, topLeftY, canvasWidth, canvasHeight){
      canvasContext.fillStyle = colorCanvas;
      canvasContext.fillRect(topLeftX, topLeftY, canvasWidth, canvasHeight);
    }
    function ball(colorBall, centerX, centerY, radius){
      canvasContext.fillStyle = colorBall;
      canvasContext.beginPath();
      canvasContext.arc(centerX, centerY, radius, 0*Math.PI, Math.PI*2, true);
      canvasContext.fill();
    }
  </script>

</body>
</html>
